<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Transfer data between program parts</TITLE>
<META NAME="description" CONTENT="Transfer data between program parts">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node18.html">
<LINK REL="previous" HREF="node16.html">
<LINK REL="up" HREF="node14.html">
<LINK REL="next" HREF="node18.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html383"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html379"
  HREF="node14.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html373"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html381"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html384"
  HREF="node18.html">Data Stack</A>
<B> Up:</B> <A NAME="tex2html380"
  HREF="node14.html">Python-binded Virtual Machine</A>
<B> Previous:</B> <A NAME="tex2html374"
  HREF="node16.html">Wrap in class</A>
 &nbsp; <B>  <A NAME="tex2html382"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION02230000000000000000">
Transfer data between program parts</A>
</H1>

<P>
Widely used methods to transfer data between program parts :
<DL>
<DT><STRONG>registers</STRONG></DT>
<DD>used on all mainstream computers, thus it is fastest memory
embedded into CPU core<A NAME="tex2html9"
  HREF="#foot371"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN></SUP></A>. On real CPUs there is one<A NAME="tex2html10"
  HREF="#foot372"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN></SUP></A>https://en.wikipedia.org/wiki/Register_filegreenregister file, so we
should define registers as static class member:
</DD>
</DL>

<P>
[language=Python]py03.py

<P>
Commands operates with registers need more complex encoding in greenprogram
memory: operand, and 1+ numbers of registers/data:

<P>
[language=Python]py04.py
<BR>
<IMG
 WIDTH="567" HEIGHT="64" ALIGN="BOTTOM" BORDER="0"
 SRC="img5.png"
 ALT="\begin{lstlisting}
0000 &lt;unbound method VM.ld&gt; [0, 1, 2, 3, 4, 5, 6, 7]
0003 &lt;un...
..., 7]
0004 &lt;unbound method VM.bye&gt; [0, 'R[1]', 2, 3, 4, 5, 6, 7]
\end{lstlisting}">
<BR>

<P>

<P><P>
<BR>
blueRegisters as fast and native for hardware CPU, as blueextra slow and
ineffective for software interpretation: every data operation require:
<DL COMPACT>
<DT></DT>
<DD>load data to 1+ register
</DD>
<DT></DT>
<DD>do operation
</DD>
<DT></DT>
<DD>(optional) store results from registers to memory 
</DD>
</DL>

<P>

<P><P>
<BR>
So we can use registers in interpreter only if we are going to play with
compilation or profiling for some real hardware or simulated CPU machine code,
but never use it in normal.

<P>
<DL>
<DT><STRONG>memory to memory</STRONG></DT>
<DD>looks much more interesting: you deal with operands and
operation result directly in memory. You can encode you command in format like
<BR>
<IMG
 WIDTH="567" HEIGHT="29" ALIGN="BOTTOM" BORDER="0"
 SRC="img6.png"
 ALT="\begin{lstlisting}
&lt;command&gt; &lt;addr1&gt; &lt;addr2&gt; &lt;addr3&gt;
\end{lstlisting}">
<BR>
notes that computer must do something with addr1 and addr2 and put result into
addr3 in memory
</DD>
</DL>

<P>
Memory-to-memory method widely used in compilers as program greenintermediate
representation [<A
 HREF="node62.html#dragon">2</A>], and very close to SSA form <A HREF="node23.html#SSA"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A>. m2m is also
the best for parallel computing<A NAME="tex2html11"
  HREF="#foot379"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">3</SPAN></SUP></A>, multimedia processing<A NAME="tex2html12"
  HREF="#foot380"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">4</SPAN></SUP></A>, asynchronous data transfer between memory locations and
RAM/device input/output<A NAME="tex2html13"
  HREF="#foot381"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">5</SPAN></SUP></A>: you send required operation and memory locations to VM using one
command and continue your execution, while parallel processes started by VM will
do all work in background.

<P>
Not so known http://www.vitanuova.com/inferno/papers/dis.htmlDIS virtual
machine for http://www.vitanuova.com/inferno/OS Inferno <A NAME="tex2html14"
  HREF="#foot385"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">6</SPAN></SUP></A> also uses m2m architecture. 

<P>
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot371">... core </A><A
 HREF="node17.html#tex2html9"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN></SUP></A></DT>
<DD> and interconnected with themself and ALU by extra
fast matrix bus

</DD>
<DT><A NAME="foot372">... one </A><A
 HREF="node17.html#tex2html10"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN></SUP></A></DT>
<DD> Zilig Z80 has two register
banks can be switched by EXX command

</DD>
<DT><A NAME="foot379">... computing </A><A
 HREF="node17.html#tex2html11"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">3</SPAN></SUP></A></DT>
<DD> there is no data interdependency and stack
locking between parallel threads

</DD>
<DT><A NAME="foot380">... processing </A><A
 HREF="node17.html#tex2html12"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">4</SPAN></SUP></A></DT>
<DD> see Intel MMX and
SSE extensions

</DD>
<DT><A NAME="foot381">... input/output </A><A
 HREF="node17.html#tex2html13"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">5</SPAN></SUP></A></DT>
<DD> in hardware this functionality known as greenDMA
transfer

</DD>
<DT><A NAME="foot385">...  </A><A
 HREF="node17.html#tex2html14"><SUP><SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">6</SPAN></SUP></A></DT>
<DD> A
compact greenguest operating system for building cross-platform distributed
systems

</DD>
</DL>
<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html383"
  HREF="node18.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html379"
  HREF="node14.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html373"
  HREF="node16.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html381"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html384"
  HREF="node18.html">Data Stack</A>
<B> Up:</B> <A NAME="tex2html380"
  HREF="node14.html">Python-binded Virtual Machine</A>
<B> Previous:</B> <A NAME="tex2html374"
  HREF="node16.html">Wrap in class</A>
 &nbsp; <B>  <A NAME="tex2html382"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
GNU Dynamic Language Runtime
</ADDRESS>
</BODY>
</HTML>
